<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  <title>Age calculator app</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'purple': '#854dff',
            'light-red': '#ff5757',
            'off-white': '#f0f0f0',
            'light-grey': '#dbdbdb',
            'smokey-grey': '#716f6f',
            'off-black': '#141414'
          },
          fontFamily: {
            'poppins': ['Poppins', 'sans-serif']
          }
        }
      }
    }
  </script>
  <style>
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type="number"] {
      -moz-appearance: textfield;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,700;0,800;1,400&display=swap" rel="stylesheet">
</head>
<body class="bg-off-white min-h-screen flex items-center justify-center font-poppins p-4 sm:p-6">
  <div class="bg-white rounded-2xl sm:rounded-3xl rounded-br-[60px] sm:rounded-br-[100px] p-6 sm:p-8 md:p-10 w-full max-w-2xl shadow-lg">
    <form id="ageForm" class="mb-8">
      <div class="grid grid-cols-3 gap-3 sm:gap-4 md:gap-8 mb-6 sm:mb-8">
        <div>
          <label class="block text-smokey-grey text-xs sm:text-sm font-bold mb-1 sm:mb-2 tracking-widest" for="day">DAY</label>
          <input type="number" id="day" placeholder="DD" class="w-full border-2 border-light-grey rounded-md sm:rounded-lg px-2 sm:px-4 py-2 sm:py-3 md:py-4 text-base sm:text-lg md:text-xl font-bold focus:border-purple focus:outline-purple hover:border-purple active:border-purple transition-colors" min="1" max="31">
          <span id="dayError" class="text-light-red text-xs italic hidden mt-1">Must be a valid day</span>
        </div>
        <div>
          <label class="block text-smokey-grey text-xs sm:text-sm font-bold mb-1 sm:mb-2 tracking-widest" for="month">MONTH</label>
          <input type="number" id="month" placeholder="MM" class="w-full border-2 border-light-grey rounded-md sm:rounded-lg px-2 sm:px-4 py-2 sm:py-3 md:py-4 text-base sm:text-lg md:text-xl font-bold focus:border-purple focus:outline-purple hover:border-purple active:border-purple transition-colors" min="1" max="12">
          <span id="monthError" class="text-light-red text-xs italic hidden mt-1">Must be a valid month</span>
        </div>
        <div>
          <label class="block text-smokey-grey text-xs sm:text-sm font-bold mb-1 sm:mb-2 tracking-widest" for="year">YEAR</label>
          <input type="number" id="year" placeholder="YYYY" class="w-full border-2 border-light-grey rounded-md sm:rounded-lg px-2 sm:px-4 py-2 sm:py-3 md:py-4 text-base sm:text-lg md:text-xl font-bold focus:border-purple focus:outline-purple hover:border-purple active:border-purple transition-colors">
          <span id="yearError" class="text-light-red text-xs italic hidden mt-1">Must be in the past</span>
        </div>
      </div>
      
      <div class="relative flex items-center my-8 sm:mb-8">
        <hr class="flex-1 border-light-grey">
        <button type="submit" class="bg-purple hover:bg-off-black transition-colors rounded-full p-3 sm:p-4 md:p-6 absolute left-1/2 transform -translate-x-1/2 sm:static sm:left-auto sm:transform-none sm:ml-auto">
          <svg xmlns="http://www.w3.org/2000/svg" width="46" height="44" viewBox="0 0 46 44" class="w-5 h-5 sm:w-6 sm:h-6 md:w-11 md:h-10">
            <g fill="none" stroke="#FFF" stroke-width="2">
              <path d="M1 22.019C8.333 21.686 23 25.616 23 44M23 44V0M45 22.019C37.667 21.686 23 25.616 23 44"/>
            </g>
          </svg>
        </button>
      </div>
    </form>
    
    <div class="space-y-1 sm:space-y-2">
      <div class="flex items-baseline">
        <span id="yearsResult" class="text-purple text-4xl sm:text-5xl md:text-6xl font-extrabold italic mr-2 sm:mr-4">--</span>
        <span class="text-off-black text-4xl sm:text-5xl md:text-8xl font-extrabold italic">years</span>
      </div>
      <div class="flex items-baseline">
        <span id="monthsResult" class="text-purple text-4xl sm:text-5xl md:text-6xl font-extrabold italic mr-2 sm:mr-4">--</span>
        <span class="text-off-black text-4xl sm:text-5xl md:text-8xl font-extrabold italic">months</span>
      </div>
      <div class="flex items-baseline">
        <span id="daysResult" class="text-purple text-4xl sm:text-5xl md:text-6xl font-extrabold italic mr-2 sm:mr-4">--</span>
        <span class="text-off-black text-4xl sm:text-5xl md:text-8xl font-extrabold italic">days</span>
      </div>
    </div>
    
  </div>

  <script>
    const form = document.getElementById('ageForm');
    const dayInput = document.getElementById('day');
    const monthInput = document.getElementById('month');
    const yearInput = document.getElementById('year');
    const dayError = document.getElementById('dayError');
    const monthError = document.getElementById('monthError');
    const yearError = document.getElementById('yearError');
    const yearsResult = document.getElementById('yearsResult');
    const monthsResult = document.getElementById('monthsResult');
    const daysResult = document.getElementById('daysResult');

    function clearErrors() {
      [dayError, monthError, yearError].forEach(error => error.classList.add('hidden'));
      [dayInput, monthInput, yearInput].forEach(input => {
        input.classList.remove('border-light-red');
        input.classList.add('border-light-grey');
      });
    }

    function showError(input, error, message) {
      input.classList.remove('border-light-grey');
      input.classList.add('border-light-red');
      error.textContent = message;
      error.classList.remove('hidden');
    }

    function isValidDate(day, month, year) {
      const date = new Date(year, month - 1, day);
      return date.getFullYear() == year && date.getMonth() == month - 1 && date.getDate() == day;
    }

    function animateNumber(element, target) {
      const duration = 1000;
      const start = 0;
      const startTime = performance.now();
      
      function update(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const current = Math.floor(start + (target - start) * progress);
        element.textContent = current;
        
        if (progress < 1) {
          requestAnimationFrame(update);
        }
      }
      
      requestAnimationFrame(update);
    }

    function calculateAge(birthDate) {
      const today = new Date();
      let years = today.getFullYear() - birthDate.getFullYear();
      let months = today.getMonth() - birthDate.getMonth();
      let days = today.getDate() - birthDate.getDate();

      if (days < 0) {
        months--;
        const lastMonth = new Date(today.getFullYear(), today.getMonth(), 0);
        days += lastMonth.getDate();
      }

      if (months < 0) {
        years--;
        months += 12;
      }

      return { years, months, days };
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      clearErrors();
      
      const day = parseInt(dayInput.value);
      const month = parseInt(monthInput.value);
      const year = parseInt(yearInput.value);
      let hasError = false;

      if (!dayInput.value) {
        showError(dayInput, dayError, 'This field is required');
        hasError = true;
      } else if (day < 1 || day > 31) {
        showError(dayInput, dayError, 'Must be a valid day');
        hasError = true;
      }

      if (!monthInput.value) {
        showError(monthInput, monthError, 'This field is required');
        hasError = true;
      } else if (month < 1 || month > 12) {
        showError(monthInput, monthError, 'Must be a valid month');
        hasError = true;
      }

      if (!yearInput.value) {
        showError(yearInput, yearError, 'This field is required');
        hasError = true;
      } else if (year > new Date().getFullYear()) {
        showError(yearInput, yearError, 'Must be in the past');
        hasError = true;
      }

      if (!hasError && dayInput.value && monthInput.value && yearInput.value) {
        if (!isValidDate(day, month, year)) {
          showError(dayInput, dayError, 'Must be a valid date');
          hasError = true;
        }

        const birthDate = new Date(year, month - 1, day);
        if (birthDate > new Date()) {
          showError(yearInput, yearError, 'Must be in the past');
          hasError = true;
        }
      }

      if (!hasError) {
        const birthDate = new Date(year, month - 1, day);
        const age = calculateAge(birthDate);
        
        animateNumber(yearsResult, age.years);
        animateNumber(monthsResult, age.months);
        animateNumber(daysResult, age.days);
      }
    });
  </script>
</body>
</html>